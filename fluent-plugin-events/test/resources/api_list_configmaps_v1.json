{
  "kind": "ConfigMapList",
  "apiVersion": "v1",
  "metadata": {
    "selfLink": "/api/v1/namespaces/sumologic/configmaps",
    "resourceVersion": "2341229"
  },
  "items": [
    {
      "metadata": {
        "name": "fluentd-config",
        "namespace": "sumologic",
        "selfLink": "/api/v1/namespaces/sumologic/configmaps/fluentd-config",
        "uid": "4c244276-781b-11e9-894b-025000000001",
        "resourceVersion": "2330925",
        "creationTimestamp": "2019-05-16T20:43:44Z",
        "annotations": {
          "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\":\"v1\",\"data\":{\"fluent.conf\":\"@include metrics.conf\\n@include logs.conf\",\"logs.conf\":\"\\u003csource\\u003e\\n  @type forward\\n  port 24321\\n  bind 0.0.0.0\\n\\u003c/source\\u003e\\n@include logs.source.containers.conf\\n@include logs.source.systemd.conf\",\"logs.output.conf\":\"\\u003cmatch **\\u003e\\n  @type sumologic\\n  log_key log\\n  endpoint \\\"#{ENV['SUMO_ENDPOINT_LOGS']}\\\"\\n  verify_ssl \\\"#{ENV['VERIFY_SSL']}\\\"\\n  log_format \\\"#{ENV['LOG_FORMAT']}\\\"\\n  flush_interval \\\"#{ENV['FLUSH_INTERVAL']}\\\"\\n  num_threads \\\"#{ENV['NUM_THREADS']}\\\"\\n  open_timeout 60\\n  add_timestamp \\\"#{ENV['ADD_TIMESTAMP']}\\\"\\n  timestamp_key \\\"#{ENV['TIMESTAMP_KEY']}\\\"\\n  proxy_uri \\\"#{ENV['PROXY_URI']}\\\"\\n\\u003c/match\\u003e\",\"logs.source.containers.conf\":\"\\u003cfilter containers.**\\u003e\\n  @type concat\\n  key log\\n  multiline_start_regexp \\\"#{ENV['MULTILINE_START_REGEXP']}\\\"\\n  separator \\\"#{ENV['CONCAT_SEPARATOR']}\\\"\\n  timeout_label @NORMAL\\n\\u003c/filter\\u003e\\n\\u003cmatch containers.**\\u003e\\n  @type relabel\\n  @label @NORMAL\\n\\u003c/match\\u003e\\n\\u003clabel @NORMAL\\u003e\\n  \\u003cfilter containers.**\\u003e\\n    @type kubernetes_metadata\\n    @log_level warn\\n    annotation_match [\\\"sumologic\\\\.com.*\\\"]\\n    de_dot false\\n    watch \\\"#{ENV['K8S_METADATA_FILTER_WATCH']}\\\"\\n    ca_file \\\"#{ENV['K8S_METADATA_FILTER_CA_FILE']}\\\"\\n    verify_ssl \\\"#{ENV['K8S_METADATA_FILTER_VERIFY_SSL']}\\\"\\n    client_cert \\\"#{ENV['K8S_METADATA_FILTER_CLIENT_CERT']}\\\"\\n    client_key \\\"#{ENV['K8S_METADATA_FILTER_CLIENT_KEY']}\\\"\\n    bearer_token_file \\\"#{ENV['K8S_METADATA_FILTER_BEARER_TOKEN_FILE']}\\\"\\n    cache_size \\\"#{ENV['K8S_METADATA_FILTER_BEARER_CACHE_SIZE']}\\\"\\n    cache_ttl \\\"#{ENV['K8S_METADATA_FILTER_BEARER_CACHE_TTL']}\\\"\\n    tag_to_kubernetes_name_regexp 'containers\\\\.(?\\u003cpod_name\\u003e[^_]+)_(?\\u003cnamespace\\u003e[^_]+)_(?\\u003ccontainer_name\\u003e.+)-(?\\u003cdocker_id\\u003e[a-z0-9]{64})\\\\.log$'\\n    merge_json_log false\\n  \\u003c/filter\\u003e\\n  \\u003cfilter containers.**\\u003e\\n    @type kubernetes_sumologic\\n    source_name \\\"#{ENV['SOURCE_NAME']}\\\"\\n    source_host \\\"#{ENV['SOURCE_HOST']}\\\"\\n    log_format \\\"#{ENV['LOG_FORMAT']}\\\"\\n    kubernetes_meta \\\"#{ENV['KUBERNETES_META']}\\\"\\n    kubernetes_meta_reduce \\\"#{ENV['KUBERNETES_META_REDUCE']}\\\"\\n    add_stream \\\"#{ENV['ADD_STREAM']}\\\"\\n    add_time \\\"#{ENV['ADD_TIME']}\\\"\\n    source_category \\\"#{ENV['SOURCE_CATEGORY']}\\\"\\n    source_category_prefix \\\"#{ENV['SOURCE_CATEGORY_PREFIX']}\\\"\\n    source_category_replace_dash \\\"#{ENV['SOURCE_CATEGORY_REPLACE_DASH']}\\\"\\n    exclude_namespace_regex \\\"#{ENV['EXCLUDE_NAMESPACE_REGEX']}\\\"\\n    exclude_pod_regex \\\"#{ENV['EXCLUDE_POD_REGEX']}\\\"\\n    exclude_container_regex \\\"#{ENV['EXCLUDE_CONTAINER_REGEX']}\\\"\\n    exclude_host_regex \\\"#{ENV['EXCLUDE_HOST_REGEX']}\\\"\\n  \\u003c/filter\\u003e\\n  @include logs.output.conf\\n\\u003c/label\\u003e\",\"logs.source.systemd.conf\":\"\\u003cmatch host.kubelet.**\\u003e\\n  @type relabel\\n  @label @KUBELET\\n\\u003c/match\\u003e\\n\\u003clabel @KUBELET\\u003e\\n  \\u003cfilter host.kubelet.**\\u003e\\n    @type kubernetes_sumologic\\n    source_category kubelet\\n    source_name k8s_kubelet\\n    source_category_prefix \\\"#{ENV['SOURCE_CATEGORY_PREFIX']}\\\"\\n    exclude_facility_regex \\\"#{ENV['EXCLUDE_FACILITY_REGEX']}\\\"\\n    exclude_host_regex \\\"#{ENV['EXCLUDE_HOST_REGEX']}\\\"\\n    exclude_priority_regex \\\"#{ENV['EXCLUDE_PRIORITY_REGEX']}\\\"\\n    exclude_unit_regex \\\"#{ENV['EXCLUDE_UNIT_REGEX']}\\\"\\n  \\u003c/filter\\u003e\\n  @include logs.output.conf\\n\\u003c/label\\u003e\\n\\u003cmatch host.**\\u003e\\n  @type relabel\\n  @label @SYSTEMD\\n\\u003c/match\\u003e\\n\\u003clabel @SYSTEMD\\u003e\\n  \\u003cfilter host.**\\u003e\\n    @type kubernetes_sumologic\\n    source_category system\\n    source_category_prefix \\\"#{ENV['SOURCE_CATEGORY_PREFIX']}\\\"\\n    exclude_facility_regex \\\"#{ENV['EXCLUDE_FACILITY_REGEX']}\\\"\\n    exclude_host_regex \\\"#{ENV['EXCLUDE_HOST_REGEX']}\\\"\\n    exclude_priority_regex \\\"#{ENV['EXCLUDE_PRIORITY_REGEX']}\\\"\\n    exclude_unit_regex \\\"#{ENV['EXCLUDE_UNIT_REGEX']}\\\"\\n  \\u003c/filter\\u003e\\n  \\u003cfilter host.**\\u003e\\n    @type record_modifier\\n    \\u003crecord\\u003e\\n      _sumo_metadata ${record[\\\"_sumo_metadata\\\"][:source] = tag_parts[1]; record[\\\"_sumo_metadata\\\"]}\\n    \\u003c/record\\u003e\\n  \\u003c/filter\\u003e\\n  @include logs.output.conf\\n\\u003c/label\\u003e\",\"metrics.conf\":\"\\u003csource\\u003e\\n  @type http\\n  port 9888\\n  \\u003cparse\\u003e\\n    @type protobuf\\n  \\u003c/parse\\u003e\\n\\u003c/source\\u003e\\n\\u003cmatch prometheus.metrics.operator.rule\\u003e\\n  @type datapoint\\n  tag prometheus.datapoint.operator.rule\\n\\u003c/match\\u003e\\n\\u003cmatch prometheus.metrics**\\u003e\\n  @type datapoint\\n  tag prometheus.datapoint\\n\\u003c/match\\u003e\\n\\u003cmatch prometheus.datapoint\\u003e\\n  @type rewrite_tag_filter\\n  \\u003crule\\u003e\\n    key job\\n    pattern ^(.*)$\\n    tag ${tag}.$1\\n  \\u003c/rule\\u003e\\n\\u003c/match\\u003e\\n\\u003cfilter prometheus.datapoint**\\u003e\\n  @type prometheus_format\\n  relabel container_name:container,pod_name:pod\\n\\u003c/filter\\u003e\\n\\u003cmatch prometheus.datapoint.apiserver**\\u003e\\n  @type sumologic\\n  endpoint \\\"#{ENV['SUMO_ENDPOINT_METRICS_APISERVER']}\\\"\\n  data_type metrics\\n  metric_data_format prometheus\\n  disable_cookies true\\n\\u003c/match\\u003e\\n\\u003cmatch prometheus.datapoint.kubelet**\\u003e\\n  @type sumologic\\n  endpoint \\\"#{ENV['SUMO_ENDPOINT_METRICS_KUBELET']}\\\"\\n  data_type metrics\\n  metric_data_format prometheus\\n  disable_cookies true\\n\\u003c/match\\u003e\\n\\u003cmatch prometheus.datapoint.kube-controller-manager**\\u003e\\n  @type sumologic\\n  endpoint \\\"#{ENV['SUMO_ENDPOINT_METRICS_KUBE_CONTROLLER_MANAGER']}\\\"\\n  data_type metrics\\n  metric_data_format prometheus\\n  disable_cookies true\\n\\u003c/match\\u003e\\n\\u003cmatch prometheus.datapoint.kube-scheduler**\\u003e\\n  @type sumologic\\n  endpoint \\\"#{ENV['SUMO_ENDPOINT_METRICS_KUBE_SCHEDULER']}\\\"\\n  data_type metrics\\n  metric_data_format prometheus\\n  disable_cookies true\\n\\u003c/match\\u003e\\n\\u003cmatch prometheus.datapoint.kube-state**\\u003e\\n  @type sumologic\\n  endpoint \\\"#{ENV['SUMO_ENDPOINT_METRICS_KUBE_STATE']}\\\"\\n  data_type metrics\\n  metric_data_format prometheus\\n  disable_cookies true\\n\\u003c/match\\u003e\\n\\u003cmatch prometheus.datapoint.node-exporter**\\u003e\\n  @type sumologic\\n  endpoint \\\"#{ENV['SUMO_ENDPOINT_METRICS_NODE_EXPORTER']}\\\"\\n  data_type metrics\\n  metric_data_format prometheus\\n  disable_cookies true\\n\\u003c/match\\u003e\\n\\u003cmatch prometheus.datapoint**\\u003e\\n  @type sumologic\\n  endpoint \\\"#{ENV['SUMO_ENDPOINT_METRICS']}\\\"\\n  data_type metrics\\n  metric_data_format prometheus\\n  disable_cookies true\\n\\u003c/match\\u003e\"},\"kind\":\"ConfigMap\",\"metadata\":{\"annotations\":{},\"name\":\"fluentd-config\",\"namespace\":\"sumologic\"}}\n"
        }
      },
      "data": {
        "fluent.conf": "@include metrics.conf\n@include logs.conf",
        "logs.conf": "\u003csource\u003e\n  @type forward\n  port 24321\n  bind 0.0.0.0\n\u003c/source\u003e\n@include logs.source.containers.conf\n@include logs.source.systemd.conf",
        "logs.output.conf": "\u003cmatch **\u003e\n  @type sumologic\n  log_key log\n  endpoint \"#{ENV['SUMO_ENDPOINT_LOGS']}\"\n  verify_ssl \"#{ENV['VERIFY_SSL']}\"\n  log_format \"#{ENV['LOG_FORMAT']}\"\n  flush_interval \"#{ENV['FLUSH_INTERVAL']}\"\n  num_threads \"#{ENV['NUM_THREADS']}\"\n  open_timeout 60\n  add_timestamp \"#{ENV['ADD_TIMESTAMP']}\"\n  timestamp_key \"#{ENV['TIMESTAMP_KEY']}\"\n  proxy_uri \"#{ENV['PROXY_URI']}\"\n\u003c/match\u003e",
        "logs.source.containers.conf": "\u003cfilter containers.**\u003e\n  @type concat\n  key log\n  multiline_start_regexp \"#{ENV['MULTILINE_START_REGEXP']}\"\n  separator \"#{ENV['CONCAT_SEPARATOR']}\"\n  timeout_label @NORMAL\n\u003c/filter\u003e\n\u003cmatch containers.**\u003e\n  @type relabel\n  @label @NORMAL\n\u003c/match\u003e\n\u003clabel @NORMAL\u003e\n  \u003cfilter containers.**\u003e\n    @type kubernetes_metadata\n    @log_level warn\n    annotation_match [\"sumologic\\.com.*\"]\n    de_dot false\n    watch \"#{ENV['K8S_METADATA_FILTER_WATCH']}\"\n    ca_file \"#{ENV['K8S_METADATA_FILTER_CA_FILE']}\"\n    verify_ssl \"#{ENV['K8S_METADATA_FILTER_VERIFY_SSL']}\"\n    client_cert \"#{ENV['K8S_METADATA_FILTER_CLIENT_CERT']}\"\n    client_key \"#{ENV['K8S_METADATA_FILTER_CLIENT_KEY']}\"\n    bearer_token_file \"#{ENV['K8S_METADATA_FILTER_BEARER_TOKEN_FILE']}\"\n    cache_size \"#{ENV['K8S_METADATA_FILTER_BEARER_CACHE_SIZE']}\"\n    cache_ttl \"#{ENV['K8S_METADATA_FILTER_BEARER_CACHE_TTL']}\"\n    tag_to_kubernetes_name_regexp 'containers\\.(?\u003cpod_name\u003e[^_]+)_(?\u003cnamespace\u003e[^_]+)_(?\u003ccontainer_name\u003e.+)-(?\u003cdocker_id\u003e[a-z0-9]{64})\\.log$'\n    merge_json_log false\n  \u003c/filter\u003e\n  \u003cfilter containers.**\u003e\n    @type kubernetes_sumologic\n    source_name \"#{ENV['SOURCE_NAME']}\"\n    source_host \"#{ENV['SOURCE_HOST']}\"\n    log_format \"#{ENV['LOG_FORMAT']}\"\n    kubernetes_meta \"#{ENV['KUBERNETES_META']}\"\n    kubernetes_meta_reduce \"#{ENV['KUBERNETES_META_REDUCE']}\"\n    add_stream \"#{ENV['ADD_STREAM']}\"\n    add_time \"#{ENV['ADD_TIME']}\"\n    source_category \"#{ENV['SOURCE_CATEGORY']}\"\n    source_category_prefix \"#{ENV['SOURCE_CATEGORY_PREFIX']}\"\n    source_category_replace_dash \"#{ENV['SOURCE_CATEGORY_REPLACE_DASH']}\"\n    exclude_namespace_regex \"#{ENV['EXCLUDE_NAMESPACE_REGEX']}\"\n    exclude_pod_regex \"#{ENV['EXCLUDE_POD_REGEX']}\"\n    exclude_container_regex \"#{ENV['EXCLUDE_CONTAINER_REGEX']}\"\n    exclude_host_regex \"#{ENV['EXCLUDE_HOST_REGEX']}\"\n  \u003c/filter\u003e\n  @include logs.output.conf\n\u003c/label\u003e",
        "logs.source.systemd.conf": "\u003cmatch host.kubelet.**\u003e\n  @type relabel\n  @label @KUBELET\n\u003c/match\u003e\n\u003clabel @KUBELET\u003e\n  \u003cfilter host.kubelet.**\u003e\n    @type kubernetes_sumologic\n    source_category kubelet\n    source_name k8s_kubelet\n    source_category_prefix \"#{ENV['SOURCE_CATEGORY_PREFIX']}\"\n    exclude_facility_regex \"#{ENV['EXCLUDE_FACILITY_REGEX']}\"\n    exclude_host_regex \"#{ENV['EXCLUDE_HOST_REGEX']}\"\n    exclude_priority_regex \"#{ENV['EXCLUDE_PRIORITY_REGEX']}\"\n    exclude_unit_regex \"#{ENV['EXCLUDE_UNIT_REGEX']}\"\n  \u003c/filter\u003e\n  @include logs.output.conf\n\u003c/label\u003e\n\u003cmatch host.**\u003e\n  @type relabel\n  @label @SYSTEMD\n\u003c/match\u003e\n\u003clabel @SYSTEMD\u003e\n  \u003cfilter host.**\u003e\n    @type kubernetes_sumologic\n    source_category system\n    source_category_prefix \"#{ENV['SOURCE_CATEGORY_PREFIX']}\"\n    exclude_facility_regex \"#{ENV['EXCLUDE_FACILITY_REGEX']}\"\n    exclude_host_regex \"#{ENV['EXCLUDE_HOST_REGEX']}\"\n    exclude_priority_regex \"#{ENV['EXCLUDE_PRIORITY_REGEX']}\"\n    exclude_unit_regex \"#{ENV['EXCLUDE_UNIT_REGEX']}\"\n  \u003c/filter\u003e\n  \u003cfilter host.**\u003e\n    @type record_modifier\n    \u003crecord\u003e\n      _sumo_metadata ${record[\"_sumo_metadata\"][:source] = tag_parts[1]; record[\"_sumo_metadata\"]}\n    \u003c/record\u003e\n  \u003c/filter\u003e\n  @include logs.output.conf\n\u003c/label\u003e",
        "metrics.conf": "\u003csource\u003e\n  @type http\n  port 9888\n  \u003cparse\u003e\n    @type protobuf\n  \u003c/parse\u003e\n\u003c/source\u003e\n\u003cmatch prometheus.metrics.operator.rule\u003e\n  @type datapoint\n  tag prometheus.datapoint.operator.rule\n\u003c/match\u003e\n\u003cmatch prometheus.metrics**\u003e\n  @type datapoint\n  tag prometheus.datapoint\n\u003c/match\u003e\n\u003cmatch prometheus.datapoint\u003e\n  @type rewrite_tag_filter\n  \u003crule\u003e\n    key job\n    pattern ^(.*)$\n    tag ${tag}.$1\n  \u003c/rule\u003e\n\u003c/match\u003e\n\u003cfilter prometheus.datapoint**\u003e\n  @type prometheus_format\n  relabel container_name:container,pod_name:pod\n\u003c/filter\u003e\n\u003cmatch prometheus.datapoint.apiserver**\u003e\n  @type sumologic\n  endpoint \"#{ENV['SUMO_ENDPOINT_METRICS_APISERVER']}\"\n  data_type metrics\n  metric_data_format prometheus\n  disable_cookies true\n\u003c/match\u003e\n\u003cmatch prometheus.datapoint.kubelet**\u003e\n  @type sumologic\n  endpoint \"#{ENV['SUMO_ENDPOINT_METRICS_KUBELET']}\"\n  data_type metrics\n  metric_data_format prometheus\n  disable_cookies true\n\u003c/match\u003e\n\u003cmatch prometheus.datapoint.kube-controller-manager**\u003e\n  @type sumologic\n  endpoint \"#{ENV['SUMO_ENDPOINT_METRICS_KUBE_CONTROLLER_MANAGER']}\"\n  data_type metrics\n  metric_data_format prometheus\n  disable_cookies true\n\u003c/match\u003e\n\u003cmatch prometheus.datapoint.kube-scheduler**\u003e\n  @type sumologic\n  endpoint \"#{ENV['SUMO_ENDPOINT_METRICS_KUBE_SCHEDULER']}\"\n  data_type metrics\n  metric_data_format prometheus\n  disable_cookies true\n\u003c/match\u003e\n\u003cmatch prometheus.datapoint.kube-state**\u003e\n  @type sumologic\n  endpoint \"#{ENV['SUMO_ENDPOINT_METRICS_KUBE_STATE']}\"\n  data_type metrics\n  metric_data_format prometheus\n  disable_cookies true\n\u003c/match\u003e\n\u003cmatch prometheus.datapoint.node-exporter**\u003e\n  @type sumologic\n  endpoint \"#{ENV['SUMO_ENDPOINT_METRICS_NODE_EXPORTER']}\"\n  data_type metrics\n  metric_data_format prometheus\n  disable_cookies true\n\u003c/match\u003e\n\u003cmatch prometheus.datapoint**\u003e\n  @type sumologic\n  endpoint \"#{ENV['SUMO_ENDPOINT_METRICS']}\"\n  data_type metrics\n  metric_data_format prometheus\n  disable_cookies true\n\u003c/match\u003e"
      }
    },
    {
      "metadata": {
        "name": "fluentd-config-events",
        "namespace": "sumologic",
        "selfLink": "/api/v1/namespaces/sumologic/configmaps/fluentd-config-events",
        "uid": "c4978472-7767-11e9-894b-025000000001",
        "resourceVersion": "1615255",
        "creationTimestamp": "2019-05-15T23:18:37Z",
        "annotations": {
          "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\":\"v1\",\"data\":{\"events.conf\":\"\\u003csource\\u003e\\n  @type events\\n\\u003c/source\\u003e\\n\\u003cmatch kubernetes.**\\u003e\\n  @type sumologic\\n  endpoint \\\"#{ENV['SUMO_ENDPOINT_EVENTS']}\\\"\\n  data_type logs\\n  disable_cookies true\\n\\u003c/match\\u003e\",\"fluent.conf\":\"@include events.conf\"},\"kind\":\"ConfigMap\",\"metadata\":{\"annotations\":{},\"name\":\"fluentd-config-events\",\"namespace\":\"sumologic\"}}\n"
        }
      },
      "data": {
        "events.conf": "\u003csource\u003e\n  @type events\n\u003c/source\u003e\n\u003cmatch kubernetes.**\u003e\n  @type sumologic\n  endpoint \"#{ENV['SUMO_ENDPOINT_EVENTS']}\"\n  data_type logs\n  disable_cookies true\n\u003c/match\u003e",
        "fluent.conf": "@include events.conf"
      }
    },
    {
      "metadata": {
        "name": "fluentd-config-resource-version",
        "namespace": "sumologic",
        "selfLink": "/api/v1/namespaces/sumologic/configmaps/fluentd-config-resource-version",
        "uid": "e81335bf-7da9-11e9-894b-025000000001",
        "resourceVersion": "2341224",
        "creationTimestamp": "2019-05-23T22:27:10Z"
      },
      "data": {
        "resource-version": "2341223"
      }
    },
    {
      "metadata": {
        "name": "fluentd-events-config",
        "namespace": "sumologic",
        "selfLink": "/api/v1/namespaces/sumologic/configmaps/fluentd-events-config",
        "uid": "ce567a20-8bc6-11e9-894b-025000000001",
        "resourceVersion": "2330927",
        "creationTimestamp": "2019-06-10T21:29:19Z",
        "annotations": {
          "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\":\"v1\",\"data\":{\"events.conf\":\"\\u003csource\\u003e\\n  @type events\\n\\u003c/source\\u003e\\n\\u003cmatch kubernetes.**\\u003e\\n  @type sumologic\\n  endpoint \\\"#{ENV['SUMO_ENDPOINT_EVENTS']}\\\"\\n  data_type logs\\n  disable_cookies true\\n\\u003c/match\\u003e\",\"fluent.conf\":\"@include events.conf\"},\"kind\":\"ConfigMap\",\"metadata\":{\"annotations\":{},\"name\":\"fluentd-events-config\",\"namespace\":\"sumologic\"}}\n"
        }
      },
      "data": {
        "events.conf": "\u003csource\u003e\n  @type events\n\u003c/source\u003e\n\u003cmatch kubernetes.**\u003e\n  @type sumologic\n  endpoint \"#{ENV['SUMO_ENDPOINT_EVENTS']}\"\n  data_type logs\n  disable_cookies true\n\u003c/match\u003e",
        "fluent.conf": "@include events.conf"
      }
    }
  ]
}